<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <title>トップ画面</title>
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />
    <!-- CSSファイルを読み込む -->
    <link rel="stylesheet" th:href="@{/css/common.css}">
</head>

<body>
	<!-- タスクバー -->
	<header class="taskbar">
		<div class="taskbar-left">
			<a th:href="@{'/' + ${employeeId} + '/top'}" class="taskbar-home-link"
				style="display:flex;align-items:center;text-decoration:none;color:inherit;">
				<span class="taskbar-logo">
					<svg width="28" height="28" viewBox="0 0 28 28" fill="none">
						<circle cx="14" cy="14" r="14" fill="#fff" opacity="0.18" />
						<rect x="7" y="7" width="14" height="14" rx="4" fill="#fff" opacity="0.9" />
						<rect x="10" y="10" width="8" height="8" rx="2" fill="#1565c0" />
					</svg>
				</span>
				<span class="taskbar-title" style="margin-left:12px;">ユーザーホーム</span>
			</a>
			<nav class="taskbar-tabs">
				<a th:href="@{/{employeeId}/top/jisseki_user(employeeId=${employeeId})}"
					th:classappend="${activeTab} == 'user' ? 'active'" class="taskbar-tab">実績管理</a>
				<a th:href="@{/{employeeId}/top/passChange_user(employeeId=${employeeId})}"
					th:classappend="${activeTab} == 'achievement' ? 'active'" class="taskbar-tab">パスワード変更</a>
				<a th:href="@{/{employeeId}/top/shinsei_user(employeeId=${employeeId})}"
					th:classappend="${activeTab} == 'approval' ? 'active'" class="taskbar-tab">各種申請</a>
			</nav>

		</div>
		<div class="taskbar-right">
			<form th:action="@{/logout}" method="post" style="margin:0;">
				<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
				<button type="submit" class="taskbar-logout">ログアウト</button>
			</form>
		</div>
	</header>

    <main>
        <!-- 月移動ナビゲーション -->
        <div class="month-nav">
            <button id="prev-month" class="month-nav-btn">&lt;&lt;</button>
            <span id="current-year-month" class="current-year-month">2025/07</span>
            <button id="next-month" class="month-nav-btn">&gt;&gt;</button>
        </div>
        <div class="database-container">
            <table class="performance-database">
                <tr>
                    <th class="col-date">日付</th>
                    <th class="col-dayofweek">曜日</th>
                    <th class="col-time">出勤時間</th>
                    <th class="col-time">退勤時間</th>
                    <th class="col-break">休憩時間(h)</th>
                    <th class="col-apply">申請</th>
                    <th class="col-status">状況</th>
                    <th class="col-reason">事由</th>
                    <th class="col-resubmit">再申請</th>
                    <th class="col-remove">取消</th>
                </tr>
                <tr th:each="performance : ${performances}" class="performance-row" th:data-id="${performance.id}">
                    <td class="col-date">
                        <input type="date" th:value="${performance.date}" disabled />
                        <input type="hidden" th:name="date" th:value="${performance.date}" />
                    </td>
                    <td class="col-dayofweek">
                        <input type="text" th:value="${performance.dayOfWeek}" />
                    </td>
                    <td class="col-time">
                        <input type="time" th:value="${performance.startTime}" />
                    </td>
                    <td class="col-time">
                        <input type="time" th:value="${performance.endTime}" />
                    </td>
                    <td class="col-break">
                        <input type="text" th:value="${performance.breakTime}" readonly />
                    </td>
                    <td class="col-apply">
                        <button type="button" class="modern-btn">申請</button>
                    </td>
                    <td class="col-status">
                        <select disabled>
                            <option value="未申請" th:selected="${performance.status == '未申請'}">未申請</option>
                            <option value="申請済み" th:selected="${performance.status == '申請済み'}">申請済み</option>
                            <option value="確定済み" th:selected="${performance.status == '確定済み'}">確定済み</option>
                            <option value="差し戻し" th:selected="${performance.status == '差し戻し'}">差し戻し</option>
                        </select>
                        <input type="hidden" th:name="status" th:value="${performance.status}" />
                    </td>
                    <td class="col-reason">
                        <input type="text" th:value="${performance.reason}" />
                    </td>
                    <td class="col-resubmit">
                        <button type="button" class="modern-btn">再申請</button>
                    </td>
                    <td class="col-remove">
                        <button type="button" class="delete-btn">取消</button>
                    </td>
                </tr>
            </table>
        </div>
    </main>
    <script th:src="@{/js/performance.js}"></script>
    <script th:inline="javascript">
        const employeeId = [[${employeeId}]];
    </script>
</body>

</html>