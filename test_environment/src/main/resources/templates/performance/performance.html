<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>トップ画面</title>
    <style>
	    /* 右上に検索フォームを配置 */
	    .search-form {
	      float: right;
	      margin-bottom: 10px;
	    }
	    /* ボタン横並びを整える */
	    .header-buttons {
	      margin-bottom: 10px;
	    }
	    .header-buttons button {
	      margin-right: 5px;
	    }
	    /* 月切替リンクと年月表示の間隔調整 */
	    .month-navigation {
	      margin-bottom: 15px;
	    }
	    .month-navigation a {
	      margin: 0 10px;
	      text-decoration: none;
	      font-weight: bold;
	    }

	    /* 祝日・会社休日用のスタイル */
	    .holiday-cell {
	      background-color: rgba(255, 105, 180, 0.5); /* ホットピンク、透明度50% */
	      position: relative;
	    }
	    /* input日付ボックスのスタイル */
	    .performance-date-input {
	      width: 100%;
	      padding-right: 60px; /* ラベル分のスペースを右に確保 */
	      box-sizing: border-box;
	      position: relative;
	      z-index: 1;
	    }
	    /* 「[会社休日]」ラベルのスタイル */
	    .holiday-label {
	      position: absolute;
	      top: 50%;
	      right: 10px; /* inputの右内側に配置 */
	      transform: translateY(-50%);
	      background-color: rgba(255, 105, 180, 0.5); /* 透明度50%のホットピンク */
	      padding: 2px 6px;
	      border-radius: 3px;
	      font-weight: bold;
	      color: #800000;
	      pointer-events: none;
	      user-select: none;
	      z-index: 2;
	      font-size: 0.8em;
	    }
	  </style>

    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />
  </head>
  <body class="performance-body">
	  <!-- 検索フォーム -->
	  <form class="search-form" th:action="@{/{employeeId}/top/jisseki_user(employeeId=${userId})}" method="get">
	    <label for="year-select">年:</label>
	    <select id="year-select" name="year" required>
	      <option th:each="y : ${#numbers.sequence(currentYeardown, currentYearup)}" th:value="${y}" th:text="${y}" th:selected="${y == year}"></option>
	    </select>
	    <label for="month-select">月:</label>
	    <select id="month-select" name="month" required>
	      <option th:each="m : ${#numbers.sequence(1, 12)}" th:value="${m}" th:text="${m}" th:selected="${m == month}"></option>
	    </select>
	    <button type="submit">検索</button>
	  </form>

    <div id="month-nav" style="display: flex; align-items: center; padding: 10px 0 10px 10px">
      <button id="prev-month">&lt;&lt;</button>
      <span id="current-year-month" style="margin: 0 15px; font-size: 1.2em">2025/07</span>
      <button id="next-month">&gt;&gt;</button>
    </div>
    <div class="database-container">
      <table class="performance-database">
        <tr>
          <th>日付</th>
          <th>曜日</th>
          <th>出勤時間</th>
          <th>退勤時間</th>
          <th>休憩時間(h)</th>
          <th>申請</th>
          <th>状況</th>
          <th>事由</th>
          <th>再申請</th>
          <th>取消</th>
          <!-- 他のカラムも必要に応じて -->
        </tr>
        <tr th:each="performance : ${performances}" class="performance-row">
          <td>
            <input type="date" th:value="${performance.date}" class="performance-date-input" disabled />
            <input type="hidden" th:name="date" th:value="${performance.date}" />
          </td>
          <td><input type="text" th:value="${performance.dayOfWeek}" class="performance-dayofweek-input" disabled /></td>
          <td><input type="time" th:value="${performance.startTime}" class="performance-start-input" disabled /></td>
          <td><input type="time" th:value="${performance.endTime}" class="performance-end-input" disabled /></td>
          <td><input type="text" th:value="${performance.breakTime}" class="performance-break-input" disabled /></td>
          <td><input type="button" value="申請" class="submit-button" /></td>
          <td>
            <select class="status-select" disabled>
              <option value="未申請" th:selected="${performance.status == '未申請'}">未申請</option>
              <option value="申請済み" th:selected="${performance.status == '申請済み'}">申請済み</option>
              <option value="確定済み" th:selected="${performance.status == '確定済み'}">確定済み</option>
              <option value="差し戻し" th:selected="${performance.status == '差し戻し'}">差し戻し</option>
            </select>
            <input type="hidden" name="status" th:value="${performance.status}" />
          </td>
          <td><input type="text" th:value="${performance.reason}" class="performance-reason-input" /></td>
          <td><input type="button" value="再申請" class="resubmit-button" /></td>
          <td><input type="button" value="取消" class="remove-button" /></td>
          <td><input type="hidden" class="performance-id" th:value="${performance.id}" /></td>
          <!-- 他のカラムも必要に応じて -->
        </tr>
      </table>
    </div>
    <script th:src="@{/js/performance.js}"></script>
    <!-- <script th:inline="javascript">
      const employeeId = [[${employeeId}]];
    </script> -->
  </body>
</html>
